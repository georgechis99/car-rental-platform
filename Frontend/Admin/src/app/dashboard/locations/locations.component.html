<h2 class="mb-3">{{ "dashboard.sidebar.locations" | translate }}</h2>

<form [formGroup]="locationsForm" (ngSubmit)="onSubmit()">
  <div class="row mt-4">
    <h5>
      {{ "dashboard.locations.headquarter-locations-subheader" | translate }}
    </h5>
    <p>
      {{ "dashboard.locations.headquarter-locations-information" | translate }}
    </p>

    <div class="row">
      <div formArrayName="headquarterLocations">
        <div
          *ngFor="
            let headquarterLocation of headquarterLocations.controls;
            let i = index
          "
        >
          <div class="card px-3 py-3 mt-3" [formGroupName]="i">
            <div class="row">
              <div class="col-4">
                <app-location-input
                  formControlName="location"
                  [placeholder]="'shared.location-input.placeholder' | translate"
                  [label]="'shared.location-input.headquarter-label' | translate"
                ></app-location-input>
              </div>
              <div class="col-2" style="margin-left: auto; display: flex; justify-content: center; align-items: center;">
                <button (click)="removeHeadquarterLocation(i)" class="btn btn-outline-danger">{{"dashboard.locations.delete-location" | translate}}</button>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>

    <div class="row mt-4 mb-5">
      <div class="col-3">
        <button (click)="addHeadquarterLocation()" class="btn btn-success" type="button">
          {{ "dashboard.locations.add-headquarter-location" | translate }}
        </button>
      </div>
    </div>

    <h5>
      {{ "dashboard.locations.delivery-locations-subheader" | translate }}
    </h5>
    <p>
      {{ "dashboard.locations.delivery-locations-information" | translate }}
    </p>

    <div class="row">
      <div formArrayName="deliveryLocations">
        <div
          *ngFor="
            let deliveryLocation of deliveryLocations.controls;
            let i = index
          "
        >
          <div class="card px-3 py-2 mt-3" [formGroupName]="i">
            <div class="row">
              <div class="col-4">
                <app-location-input
                  formControlName="location"
                  [placeholder]="
                    'shared.location-input.placeholder' | translate
                  "
                  [label]="'shared.location-input.delivery-label' | translate"
                ></app-location-input>
              </div>
              <div class="col-2">
                <label>{{
                  "dashboard.locations.delivery-fee-label" | translate
                }}</label>
                <app-text-input
                  formControlName="deliveryFee"
                  [label]="'currency.ron' | translate"
                  type="numeric"
                ></app-text-input>
              </div>
              <div class="col-2" style="margin-left: auto; display: flex; justify-content: center; align-items: center;">
                <button (click)="removeDeliveryLocation(i)" class="btn btn-outline-danger">{{"dashboard.locations.delete-location" | translate}}</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="row mt-4">
      <div class="col-3">
        <button (click)="addDeliveryLocation()" class="btn btn-success" type="button">
          {{ "dashboard.locations.add-delivery-location" | translate }}
        </button>
      </div>
    </div>

  </div>

  <div class="row mt-3">
    <div class="col-4">
      <button
        class="btn btn-success mt-3 w-100"
        type="submit"
        [disabled]="!this.isFormReadyForSubmit()"
      >
        {{ "save-button" | translate }}
      </button>
      <ngx-toastr></ngx-toastr>
    </div>
  </div>
</form>
